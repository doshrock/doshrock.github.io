<section id="blog">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2 class="section-heading">{%- include i18n.html token='key_blog' -%}</h2>
                <hr class="primary">
                <p class="text-muted">{%- include i18n.html token='para_blog_intro' -%}</p>
            </div>
        </div>
        <div class="row" style="margin-top: 50px;">
            {% assign posts = site.posts | where: "lang", page.lang | limit: 3 %}
            {% if posts.size == 0 %}
                {% assign posts = site.posts | limit: 3 %}
            {% endif %}
            {% for post in posts %}
            <div class="col-lg-4 col-md-6">
                <div class="blog-card">
                    {% if post.image %}
                    <img src="{{ post.image | relative_url }}" class="blog-thumbnail" alt="{{ post.title }}">
                    {% else %}
                    <div class="blog-thumbnail-placeholder"></div>
                    {% endif %}
                    <div class="blog-content">
                        <p class="blog-date text-muted">
                            <small>{%- include i18n.html token='key_posted_on' -%} {{ post.date | date: "%B %d, %Y" }}</small>
                        </p>
                        <h3>{{ post.title }}</h3>
                        <p class="blog-excerpt">{{ post.excerpt | strip_html | truncate: 120 }}</p>
                        <a href="{{ post.url | relative_url }}" class="btn btn-primary btn-sm">{%- include i18n.html token='key_read_more' -%}</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% if site.posts.size > 0 %}
        <div class="row" style="margin-top: 40px;">
            <div class="col-lg-12 text-center">
                {% if page.lang == 'en' %}
                <a href="{{ '/blog-en' | relative_url }}" class="btn btn-outline-primary btn-lg">{%- include i18n.html token='key_view_all_posts' -%}</a>
                {% elsif page.lang == 'kr' %}
                <a href="{{ '/blog-kr' | relative_url }}" class="btn btn-outline-primary btn-lg">{%- include i18n.html token='key_view_all_posts' -%}</a>
                {% else %}
                <a href="{{ '/blog' | relative_url }}" class="btn btn-outline-primary btn-lg">{%- include i18n.html token='key_view_all_posts' -%}</a>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
</section>

<style>
    #blog {
        padding: 80px 0;
        background-color: #fff;
    }

    .blog-card {
        background: #f8f9fa;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        height: 100%;
        display: flex;
        flex-direction: column;
        margin-bottom: 30px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .blog-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    }

    .blog-thumbnail {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .blog-thumbnail-placeholder {
        width: 100%;
        height: 200px;
        background: linear-gradient(135deg, #F05F40 0%, #f78d6b 100%);
    }

    .blog-content {
        padding: 25px;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }

    .blog-date {
        margin-bottom: 10px;
    }

    .blog-card h3 {
        color: #222;
        font-size: 1.3rem;
        margin-bottom: 15px;
        line-height: 1.4;
    }

    .blog-excerpt {
        color: #666;
        font-size: 0.95rem;
        flex-grow: 1;
        margin-bottom: 20px;
    }

    .blog-card .btn {
        align-self: flex-start;
    }

    .btn-outline-primary {
        color: #F05F40;
        border-color: #F05F40;
        background: transparent;
    }

    .btn-outline-primary:hover {
        color: #fff;
        background-color: #F05F40;
        border-color: #F05F40;
    }
</style>
